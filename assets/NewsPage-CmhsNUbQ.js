import{r,j as e,f as N,L as j,A as v}from"./index-Cc6c9i_O.js";const y={"Match Report":"賽事戰報",Official:"官方公告"},u={"Match Report":{bg:"bg-brand-accent",text:"text-brand-black"},Official:{bg:"bg-brand-blue",text:"text-white"},default:{bg:"bg-neutral-100",text:"text-neutral-600"}},k=s=>{const a=new Date(s),l=a.getFullYear(),i=String(a.getMonth()+1).padStart(2,"0"),n=String(a.getDate()).padStart(2,"0");return`${l}/${i}/${n}`},L=s=>{const a=u[s]||u.default;return`${a.bg} ${a.text}`},A=({article:s,onImageLoaded:a})=>e.jsxs(j,{to:`/news/${s.id}`,className:"group flex flex-col h-full cursor-pointer",children:[e.jsxs("div",{className:"relative overflow-hidden rounded-lg aspect-[16/10] mb-5 bg-neutral-100",children:[e.jsx("img",{src:s.imageUrl||s.coverImage||"/images/news-placeholder.jpg",alt:s.title,className:"w-full h-full object-cover transition-transform duration-700 ease-out group-hover:scale-105",onLoad:a,onError:a}),e.jsx("div",{className:"absolute inset-0 bg-white/0 group-hover:bg-white/10 transition-colors duration-300"})]}),e.jsxs("div",{className:"flex flex-col flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("span",{className:`
            inline-flex items-center justify-center px-2 py-1 rounded-sm
            text-[10px] font-bold tracking-[0.15em] uppercase leading-none
            ${L(s.category)}
          `,children:y[s.category]||"最新消息"}),e.jsx("span",{className:"text-[11px] text-neutral-400 font-mono",children:k(s.timestamp)})]}),e.jsx("h3",{className:"font-display font-bold text-lg leading-snug text-neutral-900 mb-2 group-hover:text-brand-blue transition-colors line-clamp-2",children:s.title}),e.jsx("p",{className:"text-neutral-500 text-xs leading-normal line-clamp-2 mb-4",children:s.summary}),e.jsxs("div",{className:"mt-auto pt-2 flex items-center text-brand-blue font-bold text-xs tracking-widest uppercase group/btn",children:[e.jsx("span",{className:"mr-2 group-hover/btn:underline decoration-2 underline-offset-4",children:"Read More"}),e.jsx(v,{className:"w-3 h-3 transform transition-transform duration-300 group-hover/btn:translate-x-1"})]})]})]}),S=()=>{const[s,a]=r.useState([]),[l,i]=r.useState(!0),[n,g]=r.useState(()=>{try{const t=window.sessionStorage.getItem("newsActiveFilter");if(t==="ALL"||t==="Match Report"||t==="Official")return t}catch{}return"ALL"}),[d,b]=r.useState(0),[m,p]=r.useState(!1),f=r.useCallback(()=>{b(t=>t+1)},[]);r.useEffect(()=>{try{window.sessionStorage.getItem("lastNewsAnchorId")&&window.sessionStorage.setItem("isNewsImagesLoading","true")}catch{}},[]);const h=t=>{g(t);try{window.sessionStorage.setItem("newsActiveFilter",t)}catch{}};r.useEffect(()=>{(async()=>{try{const c=await N();a(c)}finally{i(!1)}})()},[]);const x=r.useMemo(()=>[...s].sort((t,c)=>new Date(c.timestamp).getTime()-new Date(t.timestamp).getTime()),[s]),o=r.useMemo(()=>n==="ALL"?x:x.filter(t=>n==="Match Report"?t.category==="Match Report"||t.category==="戰報":n==="Official"?t.category==="Official":!1),[s,n]);r.useEffect(()=>{if(l||o.length===0)return;const t=o.length;d>=t&&!m&&(p(!0),window.sessionStorage.removeItem("isNewsImagesLoading"))},[d,o.length,l,m]);const w=[{key:"ALL",label:"全部消息"},{key:"Match Report",label:"賽事戰報"},{key:"Official",label:"官方公告"}];return e.jsx("div",{className:"pt-6 md:pt-24 min-h-[80vh] bg-white pb-24",children:e.jsxs("div",{className:"container mx-auto px-4 md:px-12 max-w-7xl",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-end justify-between mb-8 md:mb-16 border-b border-neutral-100 pb-8",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"font-display font-black md:font-extrabold text-4xl md:text-6xl uppercase text-brand-black mb-3 tracking-tight [-webkit-text-stroke:.25px_currentColor] md:[-webkit-text-stroke:0px]",children:["最新 ",e.jsx("span",{className:"text-brand-blue",children:"消息"})]}),e.jsx("p",{className:"text-neutral-400 text-sm md:text-base font-medium tracking-[0.18em] uppercase",children:"最新賽事戰報、官方公告"})]}),e.jsx("div",{className:"mt-6 md:mt-0 flex space-x-6",children:w.map(t=>e.jsx("button",{onClick:()=>h(t.key),className:`
                        text-sm font-bold uppercase transition-all duration-300 tracking-widest relative
                        border-b-2 pb-1
                        ${n===t.key?"border-brand-blue text-brand-black":"border-transparent text-neutral-400 hover:text-neutral-600"}
                    `,children:t.label},t.key))})]}),e.jsx("div",{className:"w-full",children:l?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-x-8 gap-y-12",children:[1,2,3,4,5,6].map(t=>e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"bg-neutral-100 h-56 rounded-lg mb-4"}),e.jsx("div",{className:"h-4 bg-neutral-100 w-1/3 mb-3 rounded"}),e.jsx("div",{className:"h-6 bg-neutral-100 w-3/4 mb-2 rounded"}),e.jsx("div",{className:"h-4 bg-neutral-100 w-full rounded"})]},t))}):e.jsx(e.Fragment,{children:o.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-x-10 gap-y-16",children:o.map(t=>e.jsx(A,{article:t,onImageLoaded:f},t.id))}):e.jsx("div",{className:"text-center py-20 text-neutral-400",children:"目前尚無相關消息。"})})})]})})};export{S as default};
