import{c as N,r as n,j as e,f as j,L as v,A as L}from"./index-Dv3DO9tQ.js";/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],y=N("funnel",A),M={"Match Report":"賽事戰報",Official:"官方公告"},p={"Match Report":{bg:"bg-brand-accent",text:"text-brand-black"},Official:{bg:"bg-brand-blue",text:"text-white"},default:{bg:"bg-neutral-100",text:"text-neutral-600"}},k=s=>{const a=new Date(s),l=a.getFullYear(),o=String(a.getMonth()+1).padStart(2,"0"),r=String(a.getDate()).padStart(2,"0");return`${l}/${o}/${r}`},I=s=>{const a=p[s]||p.default;return`${a.bg} ${a.text}`},m=({label:s,isActive:a,onClick:l})=>e.jsxs("button",{onClick:l,className:`
      inline-flex items-center px-4 py-2 rounded-full text-xs md:text-sm
      border transition-colors
      ${a?"bg-brand-blue text-white border-brand-blue":"bg-white text-neutral-500 border-neutral-200 hover:border-neutral-400"}
    `,children:[e.jsx(y,{className:"w-3 h-3 mr-2"}),e.jsx("span",{className:"tracking-[0.18em] uppercase",children:s})]}),S=({article:s,onImageLoaded:a})=>e.jsxs(v,{to:`/news/${s.id}`,className:"group flex flex-col h-full cursor-pointer",children:[e.jsxs("div",{className:"relative overflow-hidden rounded-lg aspect-[16/10] mb-5 bg-neutral-100",children:[e.jsx("img",{src:s.imageUrl||s.coverImage||"/images/news-placeholder.jpg",alt:s.title,className:"w-full h-full object-cover transition-transform duration-700 ease-out group-hover:scale-105",onLoad:a,onError:a}),e.jsx("div",{className:"absolute inset-0 bg-white/0 group-hover:bg-white/10 transition-colors duration-300"})]}),e.jsxs("div",{className:"flex flex-col flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("span",{className:`
            inline-flex items-center px-3 py-1 rounded-full
            text-[11px] font-semibold tracking-[0.18em] uppercase
            ${I(s.category)}
          `,children:M[s.category]||"最新消息"}),e.jsx("span",{className:"text-[11px] text-neutral-400 font-mono",children:k(s.timestamp)})]}),e.jsx("h3",{className:"font-display font-bold text-base md:text-lg leading-snug text-neutral-900 mb-2 group-hover:text-brand-blue transition-colors line-clamp-2",children:s.title}),e.jsx("p",{className:"text-neutral-500 text-sm leading-relaxed line-clamp-2 mb-4",children:s.summary}),e.jsxs("div",{className:"mt-auto pt-2 flex items-center text-brand-blue font-bold text-xs tracking-widest uppercase group/btn",children:[e.jsx("span",{className:"mr-2 group-hover/btn:underline decoration-2 underline-offset-4",children:"Read More"}),e.jsx(L,{className:"w-3 h-3 transform transition-transform duration-300 group-hover/btn:translate-x-1"})]})]})]}),C=()=>{const[s,a]=n.useState([]),[l,o]=n.useState(!0),[r,x]=n.useState("ALL"),[u,h]=n.useState(0),[g,b]=n.useState(!1),w=n.useCallback(()=>{h(t=>t+1)},[]);n.useEffect(()=>{try{const t=window.sessionStorage.getItem("newsActiveFilter");(t==="ALL"||t==="Match Report"||t==="Official")&&x(t),window.sessionStorage.getItem("lastNewsAnchorId")&&window.sessionStorage.setItem("isNewsImagesLoading","true")}catch{}},[]);const c=t=>{x(t);try{window.sessionStorage.setItem("newsActiveFilter",t)}catch{}};n.useEffect(()=>{(async()=>{try{const d=await j();a(d)}finally{o(!1)}})()},[]);const f=n.useMemo(()=>[...s].sort((t,d)=>new Date(d.timestamp).getTime()-new Date(t.timestamp).getTime()),[s]),i=n.useMemo(()=>r==="ALL"?f:f.filter(t=>r==="Match Report"?t.category==="Match Report"||t.category==="戰報":r==="Official"?t.category==="Official":!1),[s,r]);return n.useEffect(()=>{if(l||i.length===0)return;const t=i.length;u>=t&&!g&&(b(!0),window.sessionStorage.removeItem("isNewsImagesLoading"))},[u,i.length,l,g]),e.jsx("div",{className:"pt-6 md:pt-24 min-h-[80vh] bg-white pb-24",children:e.jsxs("div",{className:"container mx-auto px-4 md:px-12 max-w-7xl",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-end justify-between mb-8 md:mb-16 border-b border-neutral-100 pb-8",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"font-display font-black md:font-extrabold text-3xl md:text-5xl tracking-[0.08em] uppercase mb-3",children:[e.jsx("span",{className:"inline-block md:inline",children:"D LEAGUE"})," ",e.jsxs("span",{className:"inline-block",children:[e.jsx("span",{className:"text-neutral-900",children:"League"})," ",e.jsx("span",{className:"text-brand-blue",children:"News"})]})]}),e.jsx("p",{className:"text-neutral-400 text-sm md:text-base font-medium tracking-[0.18em] uppercase",children:"最新賽事戰報・官方公告・聯賽現場故事"})]}),e.jsxs("div",{className:"mt-6 md:mt-0 flex flex-wrap gap-3",children:[e.jsx(m,{label:"全部消息",isActive:r==="ALL",onClick:()=>c("ALL")}),e.jsx(m,{label:"賽事戰報",isActive:r==="Match Report",onClick:()=>c("Match Report")}),e.jsx(m,{label:"官方公告",isActive:r==="Official",onClick:()=>c("Official")})]})]}),e.jsx("div",{className:"w-full",children:l?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-x-8 gap-y-12",children:[1,2,3,4,5,6].map(t=>e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"bg-neutral-100 h-56 rounded-lg mb-4"}),e.jsx("div",{className:"h-4 bg-neutral-100 w-1/3 mb-3 rounded"}),e.jsx("div",{className:"h-6 bg-neutral-100 w-3/4 mb-2 rounded"}),e.jsx("div",{className:"h-4 bg-neutral-100 w-full rounded"})]},t))}):e.jsx(e.Fragment,{children:i.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-x-10 gap-y-16",children:i.map(t=>e.jsx(S,{article:t,onImageLoaded:w},t.id))}):e.jsx("div",{className:"text-center py-20 text-neutral-400",children:"目前尚無相關消息。"})})})]})})};export{C as default};
